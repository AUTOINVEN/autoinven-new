<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <%- include('../head') %>
  <link rel="stylesheet" href="/css/contractDetail.css"/>
</head>

<body>
  <header>
    <%- include('../partial/navbar') %>
  </header>
    <div class="container">
        <h3 class="contract-request-detail-title" style="display: inline;"><%=__('contractDetail_title')%></h3>
        <span class="badge bg-primary">
          완료
        </span>
        <div class="row align-items-start">
            <div class="col">
                <h4 class="contract-sub-title"><%=__('contractDetail_req_detail')%></h4>
                <table id="contract-info-table" class="table info-table" style="height: 30rem;">
                    <tr>
                      <td class=info-table-td-head><%=__('contractDetail_start_date')%></td>
                      <td class="info-table-td">
                          <input id="start_date"type="date" class="form-control" disabled="true"
                          value="2018-07-22"></input>
                      </td>
                      <td class=info-table-td-head><%=__('contractDetail_end_date')%></td>
                      <td class="info-table-td">
                        <input id="end_date" type="date" class="form-control" disabled="true"
                        value="2018-07-22"></input>
                      </td>
                    </tr>

                    <tr>
                        <td class=info-table-td-head><%=__('contractDetail_available_area')%></td>
                        <td class="info-table-td" colspan="3">2000</td>
                    </tr>
                    <tr>
                        <td class=info-table-td-head><%=__('contractDetail_req_area')%></td>
                        <td id="lease_area" class="info-table-td contract-table-td-red" colspan="3">300</td>
                    </tr>
                    <tr>
                        <td class=info-table-td-head><%=__('contractDetail_cost')%></td>
                        <td class="info-table-td" colspan="3">평당 ￦800/일</td>
                    </tr>
                    <tr>
                        <td class=info-table-td-head><%=__('contractDetail_total_cost')%></td>
                        <td id="amount" class="info-table-td contract-table-td-red" colspan="3">600000</td>
                    </tr>
                    <tr>
                        <td class=info-table-td-head><%=__('contractDetail_purpose')%></td>
                        <td class="info-table-td" colspan="3">의류보관</td>
                    </tr>
                    
                </table>
            </div>
            <div class="col-5">
              <h4 class="contract-sub-title"><%=__('contractDetail_lender_info')%></h4>
              <table class="table info-table" style="height: 30rem;">
                <tr>
                    <td class=info-table-td-head><%=__('contractDetail_lender_name')%></td>
                    <td class="info-table-td">나현준</td>
                </tr>
                <tr>
                  <td class=info-table-td-head><%=__('contractDetail_lender_email')%></td>
                  <td class="info-table-td">idiot@gmail.com</td>
                </tr>
                <tr>
                  <td class=info-table-td-head><%=__('contractDetail_lender_tel')%></td>
                  <td class="info-table-td">053-111-2222</td>
                </tr>
                <tr>
                  <td class=info-table-td-head><%=__('contractDetail_lender_phone')%></td>
                  <td class="info-table-td">010-1111-2222</td>
                </tr>
                <tr>
                  <td class=info-table-td-head><%=__('contractDetail_payment')%></td>
                  <td class="info-table-td">신용카드</td>
                </tr>
                <tr>
                  <td class=info-table-td-head><%=__('contractDetail_note')%></td>
                  <td class="info-table-td" colspan="3">
                    <textarea id="note" class="form-control" cols="40" rows="5" disabled='true'></textarea>
                  </td>
              </tr>
            </table>
            </div>
        </div>
        
        <h4 class="contract-sub-title" style="display: inline;"><%=__('contractDetail_wh_info')%></h4>
        <button type="button" class="btn btn-detail" href='#' style="margin-bottom: 0.5rem;"><%=__('contractDetail_wh_name')%></button>
        <table id="wh-info-table" class="table info-table" style="height: 25rem;">
          <tr>
              <td class="info-table-td-head"><%=__('contractDetail_wh_name')%></td>
              <td class="info-table-td" colspan="3">대구 광역시 글로벌 물류센터</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_wh_type')%></td>
              <td class="info-table-td" colspan="3">일반 창고</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_wh_address')%></td>
              <td class="info-table-td" colspan="3">대구 광역시 북구 산격동 112-13</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_wh_address_detail')%></td>
              <td class="info-table-td" colspan="3">대구 스마트 물류단지 내부</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_wh_intro')%></td>
              <td class="info-table-td" colspan="3">깔끔한 신축창고 입니다.</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_land_area')%></td>
              <td class="info-table-td">9000㎡ (2722평)</td>
              <td class=info-table-td-head><%=__('contractDetail_gross_floor_area')%></td>
              <td class="info-table-td">8900㎡ (2692평)</td>
          </tr>
          <tr>
              <td class=info-table-td-head><%=__('contractDetail_common_area')%></td>
              <td class="info-table-td">2900㎡ (877평)</td>
              <td class=info-table-td-head><%=__('contractDetail_net_leaseable_area')%></td>
              <td class="info-table-td">6000㎡ (1815평)</td>
          </tr>
        </table>

        <div class="centered-div">
            <button class="btn btn-submit" onclick="adminApproval()"><%=__('contractDetail_submit')%></button>
            <button class="btn btn-submit" data-bs-toggle="modal" data-bs-target="#paymentInfoModal">결제하기</button>
            <button class="btn btn-cancel" onclick="history.back()"><%=__('contractDetail_cancel')%></button>
        </div>
    </div>

    <footer style="margin-top: 3rem;">
        <%- include('../partial/footer') %>
    </footer>
</body>
<script>
  adminApproval= ()=>{
    let formdata ={"c_state_id": 2 }
    $.ajax({
      url: 'http://192.168.0.16:5000/api/contract/1',
      type: 'PUT',
      data: JSON.stringify(formdata),
      accepts: 'application/json',
      contentType: 'application/json; charset=utf-8',
      success: function (data) {
        console.log(data);
      },
      error: function (e) {
          console.log("ERROR : ", e);
      }
    })
  }
  adminCompletion= ()=>{
    let formdata ={"c_state_id": 3}
    $.ajax({
      url: 'http://192.168.0.16:5000/api/contract/1',
      type: 'PUT',
      data: JSON.stringify(formdata),
      accepts: 'application/json',
      contentType: 'application/json; charset=utf-8',
      success: function (data) {
        console.log(data);
      },
      error: function (e) {
          console.log("ERROR : ", e);
      }
    })

  }
  adminReject= ()=>{
    let formdata ={"c_state_id": 4}
    $.ajax({
      url: 'http://192.168.0.16:5000/api/contract/1',
      type: 'PUT',
      data: JSON.stringify(formdata),
      accepts: 'application/json',
      contentType: 'application/json; charset=utf-8',
      success: function (data) {
        console.log(data);
      },
      error: function (e) {
          console.log("ERROR : ", e);
      }
    })

  }
</script>
</html>

<!--계좌정보 모달 추후에 if 추가해서 결제대기 상태일 때만 포함 되도록 하기-->
<div class="modal fade" id="paymentInfoModal" tabindex="-1"aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="paymentInfoModalTitle" style="font-family: 'nanum-eb'; font-size: 1.5rem;">결제정보</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>은행명  : 현준은행</p>
        <p>계좌번호 : 111-222-33333-44</p>
        <p>수령인 : (주)오토인</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>
<!--계좌정보 모달-->